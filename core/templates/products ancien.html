{% extends "base.html" %}
{% load static %}
{% load mptt_tags %}

{% block content %}
            <!-- Begin Li's Breadcrumb Area -->
            {% if category %}
                {% if request.GET.category != 'all' %}
                    <div class="breadcrumb-area">
                        <div class="container">
                            <div class="breadcrumb-content">
                                <ul>
                                    <li><a href="{% url 'core:index' %}">Acceuil</a></li>
                                    {% for cat in category.get_ancestors %}
                                    <li><a href="{{cat.get_absolute_url}}">{{cat.name}}</a></li>
                                    {% endfor %}
                                    <li class="active">{{category.name}}</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                {% endif %}

            {% endif %}
            <!-- Li's Breadcrumb Area End Here -->
            <!-- Begin Li's Content Wraper Area -->
            <div class="content-wraper pt-60 pb-60 pt-sm-30">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-9 order-1 order-lg-2">
                            <div class="single-banner shop-page-banner">
                                <div class="row">
                                    {% for cat in category.get_children %}
                                    <div class="col-sm-6 col-md-4">
                                        <a href="{{cat.get_absolute_url}}">
                                        <div class="cat-box pt-3 d-flex" >
                                                <span class="d-inline-block pr-10">
                                                    <span class="d-flex category-span">
                                                        {% if cat.icon %}
                                                            <img class="d-block img-fluid" src="{{cat.icon.url}}" alt="{{cat.name}}" >
                                                        {% else %}
                                                            <img class="d-block img-fluid" src="{% static "images/icons/category.png" %}" alt="no icon" >
                                                        {% endif %}
                                                    </span>
                                                </span>
                                                <span class="align-middle d-inline-block text">{{cat.name}}</span>
                                            </div>
                                        </a>
                                    </div>
                                      
                                    {% endfor %}
                                </div>
                            </div>
                            <div class="shop-top-bar mt-30">
                                <div class="shop-bar-inner">
                                    <div class="product-view-mode">
                                        <!-- shop-item-filter-list start -->
                                        <ul class="nav shop-item-filter-list" role="tablist">
                                            <li class="active" role="presentation"><a aria-selected="true" class="active show" data-toggle="tab" role="tab" aria-controls="grid-view" href="#grid-view"><i class="fa fa-th"></i></a></li>
                                            <li role="presentation"><a data-toggle="tab" role="tab" aria-controls="list-view" href="#list-view"><i class="fa fa-th-list"></i></a></li>
                                        </ul>
                                    </div>
                                    <div class="toolbar-amount">
                                        <span>{{products.count}} produit trouver</span>
                                    </div>
                                </div>
                                {% comment %}
                                    <div class="product-select-box">
                                        <div class="product-short">
                                            <p>Sort By:</p>
                                            <select class="nice-select">
                                                <option value="trending">Relevance</option>
                                                <option value="sales">Name (A - Z)</option>
                                                <option value="sales">Name (Z - A)</option>
                                                <option value="rating">Price (Low &gt; High)</option>
                                                <option value="date">Rating (Lowest)</option>
                                                <option value="price-asc">Model (A - Z)</option>
                                                <option value="price-asc">Model (Z - A)</option>
                                            </select>
                                        </div>
                                    </div>
                                {% endcomment %}
                                <!-- product-select-box end -->
                            </div>
                            <!-- shop-top-bar end -->
                            <!-- shop-products-wrapper start -->
                            <div class="shop-products-wrapper">
                                <div class="tab-content">
                                    <div id="grid-view" class="tab-pane fade active show" role="tabpanel">
                                        <div class="product-area shop-product-area">
                                            <div class="row">
                                                {% for product in products %}
                                                    <div class="col-lg-4 col-md-4 col-sm-6 mt-40">
                                                        {% include "snippets/product-block.html" %}
                                                    </div>
                                                {% endfor %}
                                            </div>
                                        </div>
                                    </div>
                                    <div id="list-view" class="tab-pane fade product-list-view" role="tabpanel">
                                        <div class="row">
                                            <div class="col">
                                                {% for product in products %}
                                                    {% include "snippets/product-list-view.html" %}
                                                {% endfor %}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="paginatoin-area">
                                        <div class="row">
                                            <div class="col-lg-6 col-md-6 pt-xs-15">
                                                <p>Showing 1-12 of 13 item(s)</p>
                                            </div>
                                            <div class="col-lg-6 col-md-6">
                                                <ul class="pagination-box pt-xs-20 pb-xs-15">
                                                    <li><a href="#" class="Previous"><i class="fa fa-chevron-left"></i> Previous</a>
                                                    </li>
                                                    <li class="active"><a href="#">1</a></li>
                                                    <li><a href="#">2</a></li>
                                                    <li><a href="#">3</a></li>
                                                    <li>
                                                      <a href="#" class="Next"> Next <i class="fa fa-chevron-right"></i></a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- shop-products-wrapper end -->
                        </div>
                        <!--sidebar-categores-box start  -->
                        <div class="col-lg-3 order-2 order-lg-1">
                            <div id="aside" >
                                <div id="collapseFilters" >
                                <div class="aside">
                                    <form id="filters_form"  method="GET">
                                        {% csrf_token %}
                                        <div class="sidebar-categores-box mt-sm-30 mt-xs-30">
                                            <div class="sidebar-title">
                                                <h2>Filtrer par</h2>
                                            </div>
                                            <input name="name" class="input search-input" placeholder="Recherchez ici">
                                            <!-- category-sub-menu start -->
                                            <div class="category-sub-menu">
                                                <ul>
                                                    <li class="has-sub"><a href="#">Gammes</a>
                                                        <ul>
                                                            {% for gamme in gammes %}
                                                                <li>
                                                                    <div class="input-checkbox">
                                                                        <input type="checkbox" name="gamme" id="gamme-{{gamme.id}}" value="{{gamme.id}}" >
                                                                        <label for="gamme-{{gamme.id}}">
                                                                            <span></span>
                                                                            {{gamme.name}}
                                                                            <small>({{gamme.products.all|length}})</small>
                                                                        </label>
                                                                    </div>
                                                                </li>
                                                            {% endfor %} 
                                                        </ul>
                                                    </li>
                                                    <li class="has-sub"><a href="#">Categories</a>
                                                        <ul>
                                                            {% for cat in categories %}
                                                                <li>
                                                                    <div class="input-checkbox">
                                                                        <input type="checkbox" name="sous_category__category" id="category-{{cat.id}}" value="{{cat.id}}" >
                                                                        <label for="category-{{cat.id}}">
                                                                            <span></span>
                                                                            {{cat.name}}
                                                                            <small>({{cat.product_count}})</small>
                                                                        </label>
                                                                    </div>
                                                                </li>
                                                            {% endfor %} 
                                                        </ul>
                                                    </li>
                                                    <li class="has-sub"><a href="#">Sous Categories</a>
                                                        <ul>
                                                            {% for sub in sous_categories %}
                                                                <li>
                                                                    <div class="input-checkbox">
                                                                        <input type="checkbox" name="sous_category" id="subcat-{{sub.id}}" value="{{sub.id}}" >
                                                                        <label for="subcat-{{sub.id}}">
                                                                            <label for="subcat-{{sub.id}}">
                                                                            <span></span>
                                                                            {{sub.name}}
                                                                            <small>({{sub.products.all|length}})</small>
                                                                        </label>
                                                                    </div>
                                                                </li>
                                                            {% endfor %}
                                                        </ul>
                                                    </li>
                                                    <li class="has-sub"><a href="#">Tags</a>
                                                        <ul>
                                                            {% for tag in tags %}
                                                                <li>
                                                                    <div class="input-checkbox">
                                                                        <input type="checkbox" name="tag" id="tag-{{tag.id}}" value="{{tag.id}}" >
                                                                        <label for="tag-{{tag.id}}">
                                                                            <label for="tag-{{tag.id}}">
                                                                            <span></span>
                                                                            {{tag.name}}
                                                                            <small>({{tag.products.all|length}})</small>
                                                                        </label>
                                                                    </div>
                                                                </li>
                                                            {% endfor %}
                                                        </ul>
                                                    </li>
                                                    <li class="has-sub"><a href="#">Types de cheuveux</a>
                                                        <ul>
                                                            {% for ch in cheveux %}
                                                                <li>
                                                                    <div class="input-checkbox">
                                                                        <input type="checkbox" name="cheveux" id="ch-{{sub.id}}" value="{{ch.id}}" >
                                                                        <label for="ch-{{ch.id}}">
                                                                            <label for="ch-{{ch.id}}">
                                                                            <span></span>
                                                                            {{ch.name}}
                                                                            <small>({{ch.products.all|length}})</small>
                                                                        </label>
                                                                    </div>
                                                                </li>
                                                            {% endfor %}
                                                        </ul>
                                                    </li>
                                                </ul>
                                            </div>
                                            <div class="filter-sub-area" style="margin-top: 18px;margin-bottom: 18px">
                                                    
                                                <div class="input-checkbox">
                                                    <input name="new" type="checkbox" id="new">
                                                    <label for="new">
                                                        <span></span>
                                                        Nouveau
                                                    </label>
                                                </div>
                                                <div class="input-checkbox">
                                                    <input name="top" type="checkbox" id="top">
                                                    <label for="top">
                                                        <span></span>
                                                        Meilleurs Ventes
                                                    </label>
                                                </div>
                                            </div>
                                                    <div class="price-filter">
                                                        <h4 class="aside-title">Prix</h4>
                                                        <div id="price-slider"></div>
                                                        <div class="input-number price-min">
                                                            <input name="price_min" id="price-min" type="number">
                                                            <span class="qty-up">+</span>
                                                            <span class="qty-down">-</span>
                                                        </div>
                                                        <span>-</span>
                                                        <div class="input-number price-max">
                                                            <input name="price_max" id="price-max" type="number">
                                                            <span class="qty-up">+</span>
                                                            <span class="qty-down">-</span>
                                                        </div>
                                                    </div>
                                            </div>
                                        </div>
                                        <button class=" text-uppercase buy-directly btn-block mt-3" type="submit" style="margin-top: 8px;">Filtrer</button>
                                    </form>
                                </div>
                            </div>
                            <div class="sidebar-categores-box mt-sm-30 mt-xs-30">
                                <div class="sidebar-title">
                                    <h2>Categories</h2>
                                </div>
                                <div class="category-sub-menu">
                                    <ul>
                                        {% recursetree categories %}
                                            <li class="has-sub"><a href="{{node.get_absolute_url}}" style="font-size: 15px;">{{node.name}}</a>
                                                <ul>
                                                    {% for cat in node.children.all %}
                                                        <li><a  href="{{cat.get_absolute_url}}" >{{cat.name}}</a></li>  
                                                    {% endfor %}
                                                </ul>
                                            </li>
                                        {% endrecursetree %}
                                    </ul>
                                </div>
                            </div>
                            <div class="sidebar-categores-box">
                                <div class="sidebar-title">
                                    <h2>Categories</h2>
                                </div>
                                <div class="category-sub-menu">
                                    <ul>
                                        {% recursetree categories %}
                                            <li class="has-sub"><a href="{{node.get_absolute_url}}" style="font-size: 15px;">{{node.name}}</a>
                                                <ul>
                                                    {% for cat in node.children.all %}
                                                        <li><a  href="{{cat.get_absolute_url}}" >{{cat.name}}</a></li>  
                                                    {% endfor %}
                                                </ul>
                                            </li>
                                        {% endrecursetree %}
                                    </ul>
                                </div>
                                <div class="sidebar-title">
                                    <h2>Filter By</h2>
                                </div>
                                <!-- btn-clear-all start -->
                                <button class="btn-clear-all mb-sm-30 mb-xs-30">Clear all</button>
                                <div class="filter-sub-area">
                                    <h5 class="filter-sub-titel">Brand</h5>
                                    <div class="categori-checkbox">
                                        <form action="#">
                                            <ul>
                                                <li>
                                                    <input type="checkbox" name="gamme" id="gamme-{{gamme.id}}" value="{{gamme.id}}" >
                                                    <label for="gamme-{{gamme.id}}">
                                                        <span></span>
                                                        Prime Video 
                                                        <small>(13)</small>
                                                    </label>
                                                </li>
                                                <li><input type="checkbox" name="product-categori"><a href="#">Prime Video (13)</a></li>
                                                <li><input type="checkbox" checked name="product-categori"><a href="#">Computers (12)</a></li>
                                                <li><input type="checkbox" name="product-categori"><a href="#">Electronics (11)</a></li>
                                            </ul>
                                        </form>
                                    </div>
                                 </div>
                                <!-- filter-sub-area end -->
                                <!-- filter-sub-area start -->
                                <div class="filter-sub-area pt-sm-10 pt-xs-10">
                                    <h5 class="filter-sub-titel">Categories</h5>
                                    <div class="categori-checkbox">
                                        <form action="#">
                                            <ul>
                                                <li><input type="checkbox" name="product-categori"><a href="#">Graphic Corner (10)</a></li>
                                                <li><input type="checkbox" name="product-categori"><a href="#"> Studio Design (6)</a></li>
                                            </ul>
                                        </form>
                                    </div>
                                 </div>
                                <!-- filter-sub-area end -->
                                <!-- filter-sub-area start -->
                                <div class="filter-sub-area pt-sm-10 pt-xs-10">
                                    <h5 class="filter-sub-titel">Size</h5>
                                    <div class="size-checkbox">
                                        <form action="#">
                                            <ul>
                                                <li><input type="checkbox" name="product-size"><a href="#">S (3)</a></li>
                                                <li><input type="checkbox" name="product-size"><a href="#">M (3)</a></li>
                                                <li><input type="checkbox" name="product-size"><a href="#">L (3)</a></li>
                                                <li><input type="checkbox" name="product-size"><a href="#">XL (3)</a></li>
                                            </ul>
                                        </form>
                                    </div>
                                </div>
                                <!-- filter-sub-area end -->
                                <!-- filter-sub-area start -->
                                <div class="filter-sub-area pt-sm-10 pt-xs-10">
                                    <h5 class="filter-sub-titel">Color</h5>
                                    <div class="color-categoriy">
                                        <form action="#">
                                            <ul>
                                                <li><span class="white"></span><a href="#">White (1)</a></li>
                                                <li><span class="black"></span><a href="#">Black (1)</a></li>
                                                <li><span class="Orange"></span><a href="#">Orange (3) </a></li>
                                                <li><span class="Blue"></span><a href="#">Blue  (2) </a></li>
                                            </ul>
                                        </form>
                                    </div>
                                </div>
                                <!-- filter-sub-area end -->
                                <!-- filter-sub-area start -->
                                <div class="filter-sub-area pt-sm-10 pb-sm-15 pb-xs-15">
                                    <h5 class="filter-sub-titel">Dimension</h5>
                                    <div class="categori-checkbox">
                                        <form action="#">
                                            <ul>
                                                <li><input type="checkbox" name="product-categori"><a href="#">40x60cm (6)</a></li>
                                                <li><input type="checkbox" name="product-categori"><a href="#">60x90cm (6)</a></li>
                                                <li><input type="checkbox" name="product-categori"><a href="#">80x120cm (6)</a></li>
                                            </ul>
                                        </form>
                                    </div>
                                 </div>
                                <!-- filter-sub-area end -->
                            </div>
                            <!--sidebar-categores-box end  -->
                            <!-- category-sub-menu start -->
                            {% comment %}
                                <div class="sidebar-categores-box mb-sm-0 mb-xs-0">
                                    <div class="sidebar-title">
                                        <h2>Laptop</h2>
                                    </div>
                                    <div class="category-tags">
                                        <ul>
                                            <li><a href="# ">Devita</a></li>
                                            <li><a href="# ">Cameras</a></li>
                                            <li><a href="# ">Sony</a></li>
                                            <li><a href="# ">Computer</a></li>
                                            <li><a href="# ">Big Sale</a></li>
                                            <li><a href="# ">Accessories</a></li>
                                        </ul>
                                    </div>
                                    <!-- category-sub-menu end -->
                                </div>
                            {% endcomment %}
                        </div>
                    </div>
                </div>
            </div>
            <!-- Content Wraper Area End Here -->
{% endblock content %}
 